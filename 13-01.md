# Домашнее задание к занятию «Уязвимости и атаки на информационные системы»

### Инструкция по выполнению домашнего задания

1. Сделайте fork [репозитория c шаблоном решения](https://github.com/netology-code/sys-pattern-homework) к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/gitlab-hw или https://github.com/имя-вашего-репозитория/8-03-hw).
2. Выполните клонирование этого репозитория к себе на ПК с помощью команды `git clone`.
3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
   - впишите вверху название занятия и ваши фамилию и имя;
   - в каждом задании добавьте решение в требуемом виде: текст/код/скриншоты/ссылка;
   - для корректного добавления скриншотов воспользуйтесь инструкцией [«Как вставить скриншот в шаблон с решением»](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md);
   - при оформлении используйте возможности языка разметки md. Коротко об этом можно посмотреть в [инструкции по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md).
4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`).
5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
6. Любые вопросы задавайте в чате учебной группы и/или в разделе «Вопросы по заданию» в личном кабинете.

Желаем успехов в выполнении домашнего задания.

------

### Задание 1

Скачайте и установите виртуальную машину Metasploitable: https://sourceforge.net/projects/metasploitable/.

Это типовая ОС для экспериментов в области информационной безопасности, с которой следует начать при анализе уязвимостей.

Просканируйте эту виртуальную машину, используя **nmap**.

Попробуйте найти уязвимости, которым подвержена эта виртуальная машина.

Сами уязвимости можно поискать на сайте https://www.exploit-db.com/.

Для этого нужно в поиске ввести название сетевой службы, обнаруженной на атакуемой машине, и выбрать подходящие по версии уязвимости.

Ответьте на следующие вопросы:

- Какие сетевые службы в ней разрешены?
- Какие уязвимости были вами обнаружены? (список со ссылками: достаточно трёх уязвимостей)
  
*Приведите ответ в свободной форме.*  

**Ответ**

[Результаты сканирования](https://drive.google.com/file/d/1LRaSXw8Y_bgapHI4qEO6MLhcECjKro0y/view?usp=drive_link)

**Разрешенные сетевые службы:** 

| Service | Port |
| ------- | ---- |
| vsftpd 2.3.4 | 21/tcp |
| OpenSSH 4.7p1 Debian 8ubuntu1 | 22/tcp |
| Linux telnetd | 23/tcp |
| Postfix smtpd | 25/tcp |
| ISC BIND 9.4.2 | 53/tcp |
| Apache httpd 2.2.8 | 80/tcp |
| rpcbind 2 | 111/tcp |
| Samba smbd 3.X - 4.X | 139/tcp и 445/tcp |
| netkit-rsh rexecd | 512/tcp |
| login | 513/tcp |
| tcpwrapped | 514/tcp |
| GNU Classpath grmiregistry | 1099/tcp |
| Metasploitable root shell | 1524/tcp |
| NFS 2-4 | 2049/tcp |
| ProFTPD 1.3.1 | 2121/tcp |
| MySQL 5.0.51a-3ubuntu5 | 3306/tcp |
| PostgreSQL DB 8.3.0 - 8.3.7 | 5432/tcp |

**Обнаруженные уязвимости:**

1. [vsftpd 2.3.4](https://nvd.nist.gov/vuln/detail/CVE-2011-2523)
2. [OpenSSH 4.7p1 Debian 8ubuntu1](https://nvd.nist.gov/vuln/detail/CVE-2008-5161)
3. [Apache httpd 2.2.8](https://nvd.nist.gov/vuln/detail/CVE-2009-1890)
4. [Samba smbd 3.X - 4.X](https://nvd.nist.gov/vuln/detail/CVE-2017-7494)
5. [ProFTPD 1.3.1](https://nvd.nist.gov/vuln/detail/CVE-2009-3639)
6. [MySQL 5.0.51a-3ubuntu5](https://nvd.nist.gov/vuln/detail/CVE-2008-2079)

### Задание 2

Проведите сканирование Metasploitable в режимах SYN, FIN, Xmas, UDP.

Запишите сеансы сканирования в Wireshark.

Ответьте на следующие вопросы:

- Чем отличаются эти режимы сканирования с точки зрения сетевого трафика?
- Как отвечает сервер?

*Приведите ответ в свободной форме.*

**Ответ**

| Scan type | Comment |
| --------- | ------- |
| SYN | На исследуемый порт посылается сообщение SYN, затем идет ожидание ответа, на основании которого определяется статус порта. Ответы SYN/ACK говорят о том, что порт прослушивается (открыт), а ответ RST говорит о том, что не прослушивается.
Если после нескольких запросов не приходит никакого ответа, то сетевой трафик до порта узла назначения фильтруется средствами МСЭ. Также порт помечается как фильтруемый, если в ответ приходит сообщение ICMP с ошибкой достижимости (Destination Unreachable) и определенными кодами и флагами. |
| FIN/XMAS | Заключаются в отправке пакетов с отключенными флагами в заголовке TCP. При FIN - устанавливается бит TCP FIN, а в Xmas-сканировании устанавливаются флаги FIN, PSH и URG. Методы основаны на особенности спецификации RFC 793, согласно которой при закрытом порте входящий сегмент, не содержащий RST, повлечет за собой отправку RST в ответ. Когда порт открыт, ответа не будет. Ошибка достижимости ICMP означает, что порт фильтруется. |
| UDP | Для определения статуса порта посылается пустой UDP-заголовок, и если в ответ приходит ошибка достижимости ICMP Destination Unreachable с кодом Destination port unreachable, это значит, что порт закрыт; другие ошибки достижимости ICMP (Destination host unreachable, Destination protocol unreachable, Network administratively prohibited, Host administratively prohibited, Communication administratively prohibited) означают, что порт фильтруется. Если порт отвечает UDP-пакетом, значит, он открыт. Из-за специфики UDP и потери пакетов запросы повторяются несколько раз, обычно три и более. Как правило, если ответ не получен, статус порта определяется в состоянии «открыт» или «фильтруется», поскольку непонятно, что стало причиной — блокировка трафика средством защиты или потеря пакетов. |
